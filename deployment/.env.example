# Stratium Platform - Environment Configuration
# Copy this file to .env and customize as needed

# ========================================
# Keycloak OIDC Provider
# ========================================
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_PORT=8080

# PostgreSQL for Keycloak
POSTGRES_PASSWORD=keycloak_password

# ========================================
# OIDC Authentication Configuration
# ========================================
# Issuer URL - used by services to validate tokens
# From host: http://localhost:8080/realms/stratium
# From Docker network: http://keycloak:8080/realms/stratium
OIDC_ISSUER_URL=http://keycloak:8080/realms/stratium
OIDC_CLIENT_ID=stratium-key-access
OIDC_CLIENT_SECRET=stratium-key-access-secret

# ========================================
# Encryption Algorithm Configuration
# ========================================
# Options: RSA2048, RSA3072, RSA4096, P256, P384, P521, KYBER512, KYBER768, KYBER1024
PLATFORM_ENCRYPTION_ALGORITHM=KYBER1024
KEY_MANAGER_ENCRYPTION_ALGORITHM=KYBER1024
KEY_ACCESS_ENCRYPTION_ALGORITHM=KYBER1024

# ========================================
# Service Discovery Configuration
# ========================================
# Default values use Docker service names for container-to-container communication
# Override these when running outside Docker or for custom networking
PLATFORM_ADDR=platform:50051
KEY_MANAGER_ADDR=key-manager:50052
KEY_ACCESS_ADDR=key-access:50053

# ========================================
# Key Rotation (Future Feature)
# ========================================
KEY_ROTATION_ENABLED=false

# ========================================
# Database Configuration
# ========================================
# PostgreSQL connection string for PAP (Policy Administration Point)
DATABASE_URL=postgres://stratium:stratium@postgres:5432/stratium_pap?sslmode=disable

# PostgreSQL connection string for Key Manager (encrypted key storage)
KEY_MANAGER_DATABASE_URL=postgres://stratium:stratium@postgres:5432/stratium_keymanager?sslmode=disable

# ========================================
# Admin Key Configuration
# ========================================
# The admin key is used to encrypt/decrypt private key material stored in the database
# Provider types: "env", "file", or "composite" (tries file then env)
ADMIN_KEY_PROVIDER=composite
# For file provider: path to the admin key file
# For env provider: name of the environment variable containing the key
ADMIN_KEY_CONFIG=/var/run/secrets/stratium/admin-key
# Optional: Set the admin key directly (base64-encoded 32-byte key)
# ONLY use this for development - use a secrets manager for production!
# STRATIUM_ADMIN_KEY=

# ========================================
# Algorithm Reference Guide
# ========================================
# RSA Family:
#   - RSA2048: 2048-bit RSA keys (fast, lower security)
#   - RSA3072: 3072-bit RSA keys (balanced)
#   - RSA4096: 4096-bit RSA keys (slower, higher security)
#
# Elliptic Curve Cryptography (ECC):
#   - P256: NIST P-256 curve (fast, 128-bit security)
#   - P384: NIST P-384 curve (balanced, 192-bit security)
#   - P521: NIST P-521 curve (slower, 256-bit security)
#
# Post-Quantum KEM (Kyber) - Quantum-Resistant:
#   - KYBER512: Kyber-512 (fast, NIST Level 1 security)
#   - KYBER768: Kyber-768 (balanced, NIST Level 3 security) - Recommended
#   - KYBER1024: Kyber-1024 (slower, NIST Level 5 security)